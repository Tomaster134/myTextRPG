{%extends 'base.html'%} {%block title%} Chat Room {%endblock%} {%block style%}
room.css {%endblock%} {%block content%} {% with messages =
get_flashed_messages(with_categories=true) %} {% if messages %}
<ul class="flashes">
  {% for category, message in messages %}
  <li class="{{ category }}">{{ message }}</li>
  {% endfor %}
</ul>
{% endif %} {% endwith %}
<div class="room-box">
  <h2 class="room-header">Room: {{room}}</h2>
  <div class="message-box">
    <div class="messages" id="messages"></div>
    <div class="input">
      <input
        type="text"
        rows="2"
        name="message"
        id="message"
        placeholder="Type here!"
      />
      <button type="button" name="send" id="send-btn" onClick="sendMessage()">
        Send
      </button>
    </div>
  </div>
</div>

<script src="../static/js/room.js"></script>
{%for msg in messages%}
  {%if msg.type == 'message'%}
<script>
  createMessage("{{msg.username}}", "{{msg.message}}");
</script>
  {%elif msg.type == 'status'%}
  <script>
    createStatus("{{msg.username}}", "{{msg.message}}");
  </script>
  {%endif%}
{%endfor%} {%endblock%}
